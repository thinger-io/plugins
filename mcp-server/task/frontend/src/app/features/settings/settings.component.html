<nz-card [nzTitle]="titleTemplate" nzSize="small" nzType="inner">
  <div>
    <div class="tw-mb-1 tw-font-semibold tw-text-base tw-text-gray-800 tw-mt-1">Endpoint Base URL for Uplinks</div>
    <pre style="max-width: 90vw;"
      class="tw-bg-gray-100 tw-rounded-md tw-p-2 tw-mb-4 tw-text-sm tw-overflow-x-auto tw-whitespace-pre-wrap">
      <code class="tw-text-blue-800">{{endpointUrl}}uplink</code>
    </pre>
    <div class="tw-mb-1 tw-font-semibold tw-text-base tw-text-gray-800 tw-mt-4">Endpoint Base URL for Downlinks
      <span class="tw-ml-2">
        <fa-icon [icon]="faQuestionCircle"
          nz-tooltip="Designed for integration with third-party services (e.g., Node-RED or custom HTTP endpoints on Thinger.io), this URL serves as an interface for external system communication.">
        </fa-icon>
      </span>
    </div>
    <pre style="max-width: 90vw;"
      class="tw-bg-gray-100 tw-rounded-md tw-p-2 tw-mb-6 tw-text-sm tw-overflow-x-auto tw-whitespace-pre-wrap">
      <code class="tw-text-blue-800">{{endpointUrl}}downlink</code>
    </pre>

    <!-- Línea de token: misma alineación que títulos de endpoints -->
    <div class="tw-mb-1 tw-font-semibold tw-text-base tw-text-gray-800 tw-mt-4">TTN API Token</div>
    <div
      class="tw-flex tw-items-center tw-bg-gray-100 tw-rounded-md tw-px-3 tw-py-2 tw-gap-2 tw-max-w-full tw-mb-4 tw-text-sm">
      <span class="tw-text-gray-600 tw-select-none">Bearer</span>
      <span *ngIf="!tokenVisible" class="tw-tracking-widest tw-text-gray-400">•••••••••••••••••••••••••••••••</span>
      <span *ngIf="tokenVisible"
        class="tw-font-mono tw-break-all tw-bg-white tw-rounded tw-px-2 tw-py-1 tw-border tw-border-gray-200 tw-shadow-sm tw-text-blue-800 tw-cursor-text"
        style="max-width: 350px; overflow-x: auto;">
        {{ ttnToken }}
      </span>
      <!-- botón ver/ocultar -->
      <button nz-button nzType="text" nzSize="small" (click)="showTokenModal()"
        nz-tooltip="Show full token">
        <fa-icon [icon]="tokenVisible ? faEyeSlash : faEye"></fa-icon>
      </button>
      <!-- botón copiar -->
      <button nz-button nzType="text" nzSize="small" (click)="copyToken()" nz-tooltip="Copy token">
        <fa-icon [icon]="faCopy"></fa-icon>
      </button>
    </div>

    <!-- Info Panel -->
    <div
      class="tw-bg-blue-50 tw-border tw-border-blue-300 tw-text-blue-900 tw-p-4 tw-rounded-xl tw-flex tw-items-start tw-gap-3 tw-shadow-sm">
      <span class="tw-mt-1">
        <fa-icon [icon]="faInfoCircle"></fa-icon>
      </span>
      <div>
        <div class="tw-font-semibold tw-mb-1">Important:</div>
        <div>
          To send <span class="tw-font-semibold">downlink messages</span>, your device must first have sent an <span
            class="tw-font-semibold">uplink message</span>.
          This allows the application to store the TTN token and the URLs required to <span
            class="tw-font-semibold">push</span> or <span class="tw-font-semibold">replace</span> the device's downlink
          queue in the application metadata.
        </div>
      </div>
    </div>
  </div>
</nz-card>
<ng-template #titleTemplate>
  <span class="tw-mr-2">
    <fa-icon [icon]="faGears"></fa-icon>
  </span>
  <span class="tw-font-bold">Webhook Settings</span>
  <span class="tw-ml-2">
    <fa-icon [icon]="faQuestionCircle" nz-tooltip="Application Output Settings for TTN HTTP Push"></fa-icon>
  </span>
</ng-template>