<!-- mcp.component.html -->
<div class="tw-h-full">
  <nz-spin [nzSpinning]="loading()">
    <div class="tw-space-y-4">

      <!-- Error Alert -->
      <nz-alert
        *ngIf="error()"
        nzType="error"
        [nzMessage]="error()"
        nzShowIcon>
      </nz-alert>

      <ng-container *ngIf="!loading() && cfg() as c">

        <!-- Backend Status Badge -->
        <div class="tw-flex tw-items-center tw-gap-2 tw-p-3 tw-bg-green-50 tw-border tw-border-green-200 tw-rounded-lg">
          <span nz-icon nzType="check-circle" nzTheme="fill" class="tw-text-green-500 tw-text-lg"></span>
          <span class="tw-text-sm tw-font-medium tw-text-green-700">Server Online</span>
        </div>

        <!-- URL Section -->
        <div class="tw-space-y-2">
          <div class="tw-flex tw-items-center tw-justify-between">
            <label class="tw-text-xs tw-font-semibold tw-text-gray-600 tw-uppercase tw-tracking-wide">
              Endpoint URL
            </label>
            <button
              nz-button
              nzType="text"
              nzSize="small"
              nz-tooltip
              nzTooltipTitle="Copy URL"
              (click)="copy(c.url)"
              class="tw-text-gray-500 hover:tw-text-blue-500">
              <span nz-icon nzType="copy"></span>
            </button>
          </div>
          <div class="tw-relative">
            <pre class="tw-bg-gray-50 tw-border tw-border-gray-200 tw-rounded-lg tw-p-3 tw-text-sm tw-font-mono tw-overflow-x-auto tw-m-0 tw-text-gray-700">{{ c.url }}</pre>
          </div>
        </div>

        <!-- Token Section -->
        <div class="tw-space-y-2">
          <div class="tw-flex tw-items-center tw-justify-between">
            <label class="tw-text-xs tw-font-semibold tw-text-gray-600 tw-uppercase tw-tracking-wide">
              Bearer Token
            </label>
            <nz-space nzSize="small">
              <button
                *nzSpaceItem
                nz-button
                nzType="text"
                nzSize="small"
                (click)="reveal.set(!reveal())"
                [nzTooltipTitle]="reveal() ? 'Hide Token' : 'Show Token'"
                nz-tooltip
                class="tw-text-gray-500 hover:tw-text-blue-500">
                <span nz-icon [nzType]="reveal() ? 'eye-invisible' : 'eye'"></span>
              </button>
              <button
                *nzSpaceItem
                nz-button
                nzType="text"
                nzSize="small"
                nz-tooltip
                nzTooltipTitle="Copy Token"
                (click)="copy(c.token)"
                class="tw-text-gray-500 hover:tw-text-blue-500">
                <span nz-icon nzType="copy"></span>
              </button>
            </nz-space>
          </div>
          <div class="tw-relative">
            <pre class="tw-bg-gray-50 tw-border tw-border-gray-200 tw-rounded-lg tw-p-3 tw-text-sm tw-font-mono tw-overflow-x-auto tw-m-0 tw-text-gray-700">{{ maskedToken(c.token) }}</pre>
          </div>
        </div>

        <!-- Info Box -->
        <div class="tw-flex tw-items-start tw-gap-3 tw-p-4 tw-bg-blue-50 tw-border tw-border-blue-200 tw-rounded-lg">
          <span nz-icon nzType="info-circle" nzTheme="fill" class="tw-text-blue-500 tw-text-lg tw-flex-shrink-0 tw-mt-0.5"></span>
          <div class="tw-space-y-1">
            <p class="tw-text-sm tw-font-medium tw-text-blue-900 tw-m-0">
              How to Connect
            </p>
            <p class="tw-text-xs tw-text-blue-700 tw-m-0 tw-leading-relaxed">
              Configure your MCP client with the endpoint URL above and select <strong>"Bearer Token"</strong> authentication.
              Then paste the token to establish the connection.
            </p>
          </div>
        </div>
      </ng-container>
    </div>
  </nz-spin>
</div>
